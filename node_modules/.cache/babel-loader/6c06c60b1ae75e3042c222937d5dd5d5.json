{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\stehe\\\\Documents\\\\Projects\\\\React\\\\Templates\\\\Dashboard\\\\src\\\\AppTableOfContents.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n/* eslint-disable react/no-danger */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport marked from 'marked';\nimport warning from 'warning';\nimport throttle from 'lodash/throttle';\nimport clsx from 'clsx';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport textToHash from 'docs/src/modules/utils/textToHash';\nimport Link from 'docs/src/modules/components/Link';\nimport compose from 'docs/src/modules/utils/compose';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst styles = theme => ({\n  root: {\n    top: 70,\n    // Fix IE 11 position sticky issue.\n    marginTop: 70,\n    width: 175,\n    flexShrink: 0,\n    order: 2,\n    position: 'sticky',\n    height: 'calc(100vh - 70px)',\n    overflowY: 'auto',\n    padding: theme.spacing(2, 2, 2, 0),\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block'\n    }\n  },\n  contents: {\n    marginTop: theme.spacing(2),\n    paddingLeft: theme.spacing(1.5)\n  },\n  ul: {\n    padding: 0,\n    margin: 0,\n    listStyleType: 'none'\n  },\n  item: {\n    fontSize: 13,\n    padding: theme.spacing(0.5, 0, 0.5, 1),\n    borderLeft: '4px solid transparent',\n    boxSizing: 'content-box',\n    '&:hover': {\n      borderLeft: `4px solid ${theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[900]}`\n    },\n    '&$active,&:active': {\n      borderLeft: `4px solid ${theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[800]}`\n    }\n  },\n  secondaryItem: {\n    paddingLeft: theme.spacing(2.5)\n  },\n  active: {}\n});\n\nconst renderer = new marked.Renderer();\n\nfunction setRenderer(itemsCollector, unique) {\n  renderer.heading = (text, level) => {\n    if (level === 2) {\n      itemsCollector.current.push({\n        text,\n        level,\n        hash: textToHash(text, unique),\n        children: []\n      });\n    } else if (level === 3) {\n      if (!itemsCollector.current[itemsCollector.current.length - 1]) {\n        throw new Error(`Missing parent level for: ${text}`);\n      }\n\n      itemsCollector.current[itemsCollector.current.length - 1].children.push({\n        text,\n        level,\n        hash: textToHash(text, unique)\n      });\n    }\n  };\n}\n\nfunction getItemsServer(contents, itemsCollector) {\n  marked(contents.join(''), {\n    renderer\n  });\n  return itemsCollector.current;\n}\n\nfunction getItemsClient(items) {\n  const itemsClient = [];\n  items.forEach(item2 => {\n    itemsClient.push({ ...item2,\n      node: document.getElementById(item2.hash)\n    });\n\n    if (item2.children.length > 0) {\n      item2.children.forEach(item3 => {\n        itemsClient.push({ ...item3,\n          node: document.getElementById(item3.hash)\n        });\n      });\n    }\n  });\n  return itemsClient;\n}\n\nconst noop = () => {};\n\nfunction useThrottledOnScroll(callback, delay) {\n  _s();\n\n  const throttledCallback = React.useMemo(() => callback ? throttle(callback, delay) : noop, [callback, delay]);\n  React.useEffect(() => {\n    if (throttledCallback === noop) {\n      return undefined;\n    }\n\n    window.addEventListener('scroll', throttledCallback);\n    return () => {\n      window.removeEventListener('scroll', throttledCallback);\n      throttledCallback.cancel();\n    };\n  }, [throttledCallback]);\n}\n\n_s(useThrottledOnScroll, \"/+bhdVpQkO2wECcqumJukwhv5ZM=\");\n\nfunction AppTableOfContents(props) {\n  _s2();\n\n  const {\n    classes,\n    contents,\n    t\n  } = props;\n  const itemsServer = React.useMemo(() => {\n    const itemsCollectorRef = {\n      current: []\n    };\n    setRenderer(itemsCollectorRef, {});\n    return getItemsServer(contents, itemsCollectorRef);\n  }, [contents]);\n  const itemsClientRef = React.useRef([]);\n  React.useEffect(() => {\n    itemsClientRef.current = getItemsClient(itemsServer);\n  }, [itemsServer]);\n  const [activeState, setActiveState] = React.useState(null);\n  const clickedRef = React.useRef(false);\n  const unsetClickedRef = React.useRef(null);\n  const findActiveIndex = React.useCallback(() => {\n    // Don't set the active index based on scroll if a link was just clicked\n    if (clickedRef.current) {\n      return;\n    }\n\n    let active;\n\n    for (let i = itemsClientRef.current.length - 1; i >= 0; i -= 1) {\n      // No hash if we're near the top of the page\n      if (document.documentElement.scrollTop < 200) {\n        active = {\n          hash: null\n        };\n        break;\n      }\n\n      const item = itemsClientRef.current[i];\n      warning(item.node, `Missing node on the item ${JSON.stringify(item, null, 2)}`);\n\n      if (item.node && item.node.offsetTop < document.documentElement.scrollTop + document.documentElement.clientHeight / 8) {\n        active = item;\n        break;\n      }\n    }\n\n    if (active && activeState !== active.hash) {\n      setActiveState(active.hash);\n    }\n  }, [activeState]); // Corresponds to 10 frames at 60 Hz\n\n  useThrottledOnScroll(itemsServer.length > 0 ? findActiveIndex : null, 166);\n\n  const handleClick = hash => () => {\n    // Used to disable findActiveIndex if the page scrolls due to a click\n    clickedRef.current = true;\n    unsetClickedRef.current = setTimeout(() => {\n      clickedRef.current = false;\n    }, 1000);\n\n    if (activeState !== hash) {\n      setActiveState(hash);\n    }\n  };\n\n  React.useEffect(() => () => {\n    clearTimeout(unsetClickedRef.current);\n  }, []);\n\n  const itemLink = (item, secondary) => /*#__PURE__*/_jsxDEV(Link, {\n    display: \"block\",\n    color: activeState === item.hash ? 'textPrimary' : 'textSecondary',\n    href: `#${item.hash}`,\n    underline: \"none\",\n    onClick: handleClick(item.hash),\n    className: clsx(classes.item, {\n      [classes.secondaryItem]: secondary\n    }, activeState === item.hash ? classes.active : undefined),\n    children: /*#__PURE__*/_jsxDEV(\"span\", {\n      dangerouslySetInnerHTML: {\n        __html: item.text\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: classes.root,\n    \"aria-label\": \"Page table of contents\",\n    children: itemsServer.length > 0 ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        gutterBottom: true,\n        className: classes.contents,\n        children: t('tableOfContents')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        component: \"ul\",\n        className: classes.ul,\n        children: itemsServer.map(item2 => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [itemLink(item2), item2.children.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: classes.ul,\n            children: item2.children.map(item3 => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: itemLink(item3, true)\n            }, item3.text, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 19\n          }, this) : null]\n        }, item2.text, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }, this) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(AppTableOfContents, \"X7+fFUtpGu4kR1RNG6x1b4OuEy4=\", false, function () {\n  return [useThrottledOnScroll];\n});\n\n_c = AppTableOfContents;\nAppTableOfContents.propTypes = {\n  classes: PropTypes.object.isRequired,\n  contents: PropTypes.array.isRequired,\n  t: PropTypes.func.isRequired\n};\nexport default compose(connect(state => ({\n  t: state.options.t\n})), withStyles(styles))(AppTableOfContents);\n\nvar _c;\n\n$RefreshReg$(_c, \"AppTableOfContents\");","map":{"version":3,"sources":["C:/Users/stehe/Documents/Projects/React/Templates/Dashboard/src/AppTableOfContents.js"],"names":["React","PropTypes","marked","warning","throttle","clsx","connect","withStyles","Typography","textToHash","Link","compose","styles","theme","root","top","marginTop","width","flexShrink","order","position","height","overflowY","padding","spacing","display","breakpoints","up","contents","paddingLeft","ul","margin","listStyleType","item","fontSize","borderLeft","boxSizing","palette","type","grey","secondaryItem","active","renderer","Renderer","setRenderer","itemsCollector","unique","heading","text","level","current","push","hash","children","length","Error","getItemsServer","join","getItemsClient","items","itemsClient","forEach","item2","node","document","getElementById","item3","noop","useThrottledOnScroll","callback","delay","throttledCallback","useMemo","useEffect","undefined","window","addEventListener","removeEventListener","cancel","AppTableOfContents","props","classes","t","itemsServer","itemsCollectorRef","itemsClientRef","useRef","activeState","setActiveState","useState","clickedRef","unsetClickedRef","findActiveIndex","useCallback","i","documentElement","scrollTop","JSON","stringify","offsetTop","clientHeight","handleClick","setTimeout","clearTimeout","itemLink","secondary","__html","map","propTypes","object","isRequired","array","func","state","options"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-danger */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport marked from 'marked';\r\nimport warning from 'warning';\r\nimport throttle from 'lodash/throttle';\r\nimport clsx from 'clsx';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport textToHash from 'docs/src/modules/utils/textToHash';\r\nimport Link from 'docs/src/modules/components/Link';\r\nimport compose from 'docs/src/modules/utils/compose';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    top: 70,\r\n    // Fix IE 11 position sticky issue.\r\n    marginTop: 70,\r\n    width: 175,\r\n    flexShrink: 0,\r\n    order: 2,\r\n    position: 'sticky',\r\n    height: 'calc(100vh - 70px)',\r\n    overflowY: 'auto',\r\n    padding: theme.spacing(2, 2, 2, 0),\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n  contents: {\r\n    marginTop: theme.spacing(2),\r\n    paddingLeft: theme.spacing(1.5),\r\n  },\r\n  ul: {\r\n    padding: 0,\r\n    margin: 0,\r\n    listStyleType: 'none',\r\n  },\r\n  item: {\r\n    fontSize: 13,\r\n    padding: theme.spacing(0.5, 0, 0.5, 1),\r\n    borderLeft: '4px solid transparent',\r\n    boxSizing: 'content-box',\r\n    '&:hover': {\r\n      borderLeft: `4px solid ${\r\n        theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[900]\r\n      }`,\r\n    },\r\n    '&$active,&:active': {\r\n      borderLeft: `4px solid ${\r\n        theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[800]\r\n      }`,\r\n    },\r\n  },\r\n  secondaryItem: {\r\n    paddingLeft: theme.spacing(2.5),\r\n  },\r\n  active: {},\r\n});\r\n\r\nconst renderer = new marked.Renderer();\r\n\r\nfunction setRenderer(itemsCollector, unique) {\r\n  renderer.heading = (text, level) => {\r\n    if (level === 2) {\r\n      itemsCollector.current.push({\r\n        text,\r\n        level,\r\n        hash: textToHash(text, unique),\r\n        children: [],\r\n      });\r\n    } else if (level === 3) {\r\n      if (!itemsCollector.current[itemsCollector.current.length - 1]) {\r\n        throw new Error(`Missing parent level for: ${text}`);\r\n      }\r\n\r\n      itemsCollector.current[itemsCollector.current.length - 1].children.push({\r\n        text,\r\n        level,\r\n        hash: textToHash(text, unique),\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nfunction getItemsServer(contents, itemsCollector) {\r\n  marked(contents.join(''), { renderer });\r\n  return itemsCollector.current;\r\n}\r\n\r\nfunction getItemsClient(items) {\r\n  const itemsClient = [];\r\n\r\n  items.forEach(item2 => {\r\n    itemsClient.push({\r\n      ...item2,\r\n      node: document.getElementById(item2.hash),\r\n    });\r\n\r\n    if (item2.children.length > 0) {\r\n      item2.children.forEach(item3 => {\r\n        itemsClient.push({\r\n          ...item3,\r\n          node: document.getElementById(item3.hash),\r\n        });\r\n      });\r\n    }\r\n  });\r\n  return itemsClient;\r\n}\r\n\r\nconst noop = () => {};\r\n\r\nfunction useThrottledOnScroll(callback, delay) {\r\n  const throttledCallback = React.useMemo(() => (callback ? throttle(callback, delay) : noop), [\r\n    callback,\r\n    delay,\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    if (throttledCallback === noop) {\r\n      return undefined;\r\n    }\r\n\r\n    window.addEventListener('scroll', throttledCallback);\r\n    return () => {\r\n      window.removeEventListener('scroll', throttledCallback);\r\n      throttledCallback.cancel();\r\n    };\r\n  }, [throttledCallback]);\r\n}\r\n\r\nfunction AppTableOfContents(props) {\r\n  const { classes, contents, t } = props;\r\n\r\n  const itemsServer = React.useMemo(() => {\r\n    const itemsCollectorRef = { current: [] };\r\n    setRenderer(itemsCollectorRef, {});\r\n    return getItemsServer(contents, itemsCollectorRef);\r\n  }, [contents]);\r\n\r\n  const itemsClientRef = React.useRef([]);\r\n  React.useEffect(() => {\r\n    itemsClientRef.current = getItemsClient(itemsServer);\r\n  }, [itemsServer]);\r\n\r\n  const [activeState, setActiveState] = React.useState(null);\r\n  const clickedRef = React.useRef(false);\r\n  const unsetClickedRef = React.useRef(null);\r\n  const findActiveIndex = React.useCallback(() => {\r\n    // Don't set the active index based on scroll if a link was just clicked\r\n    if (clickedRef.current) {\r\n      return;\r\n    }\r\n\r\n    let active;\r\n    for (let i = itemsClientRef.current.length - 1; i >= 0; i -= 1) {\r\n      // No hash if we're near the top of the page\r\n      if (document.documentElement.scrollTop < 200) {\r\n        active = { hash: null };\r\n        break;\r\n      }\r\n\r\n      const item = itemsClientRef.current[i];\r\n\r\n      warning(item.node, `Missing node on the item ${JSON.stringify(item, null, 2)}`);\r\n\r\n      if (\r\n        item.node &&\r\n        item.node.offsetTop <\r\n          document.documentElement.scrollTop + document.documentElement.clientHeight / 8\r\n      ) {\r\n        active = item;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (active && activeState !== active.hash) {\r\n      setActiveState(active.hash);\r\n    }\r\n  }, [activeState]);\r\n\r\n  // Corresponds to 10 frames at 60 Hz\r\n  useThrottledOnScroll(itemsServer.length > 0 ? findActiveIndex : null, 166);\r\n\r\n  const handleClick = hash => () => {\r\n    // Used to disable findActiveIndex if the page scrolls due to a click\r\n    clickedRef.current = true;\r\n    unsetClickedRef.current = setTimeout(() => {\r\n      clickedRef.current = false;\r\n    }, 1000);\r\n\r\n    if (activeState !== hash) {\r\n      setActiveState(hash);\r\n    }\r\n  };\r\n\r\n  React.useEffect(\r\n    () => () => {\r\n      clearTimeout(unsetClickedRef.current);\r\n    },\r\n    [],\r\n  );\r\n\r\n  const itemLink = (item, secondary) => (\r\n    <Link\r\n      display=\"block\"\r\n      color={activeState === item.hash ? 'textPrimary' : 'textSecondary'}\r\n      href={`#${item.hash}`}\r\n      underline=\"none\"\r\n      onClick={handleClick(item.hash)}\r\n      className={clsx(\r\n        classes.item,\r\n        { [classes.secondaryItem]: secondary },\r\n        activeState === item.hash ? classes.active : undefined,\r\n      )}\r\n    >\r\n      <span dangerouslySetInnerHTML={{ __html: item.text }} />\r\n    </Link>\r\n  );\r\n\r\n  return (\r\n    <nav className={classes.root} aria-label=\"Page table of contents\">\r\n      {itemsServer.length > 0 ? (\r\n        <React.Fragment>\r\n          <Typography gutterBottom className={classes.contents}>\r\n            {t('tableOfContents')}\r\n          </Typography>\r\n          <Typography component=\"ul\" className={classes.ul}>\r\n            {itemsServer.map(item2 => (\r\n              <li key={item2.text}>\r\n                {itemLink(item2)}\r\n                {item2.children.length > 0 ? (\r\n                  <ul className={classes.ul}>\r\n                    {item2.children.map(item3 => (\r\n                      <li key={item3.text}>{itemLink(item3, true)}</li>\r\n                    ))}\r\n                  </ul>\r\n                ) : null}\r\n              </li>\r\n            ))}\r\n          </Typography>\r\n        </React.Fragment>\r\n      ) : null}\r\n    </nav>\r\n  );\r\n}\r\n\r\nAppTableOfContents.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  contents: PropTypes.array.isRequired,\r\n  t: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default compose(\r\n  connect(state => ({\r\n    t: state.options.t,\r\n  })),\r\n  withStyles(styles),\r\n)(AppTableOfContents);"]},"metadata":{},"sourceType":"module"}